<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="records-list">
  <template>
    <style is="custom-style">
      .flex-horizontal-with-ratios {
         @apply(--layout-horizontal);
      }
      .flexchild {
        @apply(--layout-flex);
      }
    </style>
      <div id="container" class="container flex-horizontal-with-ratios">
     </div>
  </template>
  <script>
    Polymer({
      is: 'records-list',
      properties : {
        recordsdata : {
          type : Object,
          observer : 'recordsdataHandler'
        }
       },
       attached: function() {
         if (!this._initialized){
           var request =  {action : 'get', table : 'records', filter :{}};
           var query = { requester : this, property : 'recordsdata', request :request };
           this.fire('query', query);
           this._initialized = true;
         }
       },
       recordsdataHandler: function(recordsdata) {
        var container = this.$.container;
        var length = 0, i=0,j=0;

        var Cells = [];
        var entries = ["epreuve","temps","age","lieu","date"];
        var length1 = entries.length;
        for (i=0;i<length1;i++){
          newCell = document.createElement("div");
          Polymer.dom(newCell).setAttribute('class', 'flexchild');
          Polymer.dom(container).appendChild(newCell);
          var newdiv = document.createElement("div");
          Polymer.dom(newdiv).innerHTML = entries[i];
          Polymer.dom(newCell).appendChild(newdiv);
          Cells.push(newCell);
        }

        length = recordsdata.length;
        var record;
        for (i=0;i<length;i++){
          record = recordsdata[i];
          for (j=0;j<length1;j++){
            var newdiv = document.createElement("div");
            Polymer.dom(newdiv).innerHTML = record[entries[j]];
            Polymer.dom(Cells[j]).appendChild(newdiv);
          }
        }
      }
    });
  </script>
</dom-module>
